<template>
        <div class="sidebar">
            <div class="frame-bar">
                <div class="sidebar-1">
                </div>
                <div class="frame--pt"  @click="goToExpertRegist"  >
                    <div class="rectangle-">
                    </div>
                    <div class="text--">
                        전문가 등록
                    </div>
                    <svg id="0:1920" class="icon-park-outlineclick"></svg>
                </div>
            </div>
            <div class="frame-">
                <svg id="0:1694" class="pen-"></svg>
                <div class="text---">
                    내 위치로 검색하기
                </div>
                <svg id="0:1696" class="group-"></svg>
            </div>
            <div class="frame--pt-1">
                <div class="rectangle--1">
                </div>
                <div class="pt">
                    PT
                </div>
                <svg id="0:1704" class="material-symbolsexercise-outline"></svg>
            </div>
            <div class="frame--">
                <div class="rectangle--2">
                </div>
                <div class="text-">
                    병원
                </div>
                <svg id="0:1709" class="rihospital-line"></svg>
            </div>
            <div class="pt1">
                <div class="rectangle--">
                </div>
                <div class="pt1-1">
                    <div class="group--1">
                        <div class="text----1">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group--">
                        <div class="pt-1">
                            PT
                        </div>
                        <svg id="0:1722" class="line-3"></svg>
                        <div class="text---1">
                            김혜준 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/bf67d464ef9ebd626449920c5fb74094.jpg" class="rectangle--3" />
                    <div class="group--2">
                        <svg id="0:1728" class="vector-7"></svg>
                        <div class="text-49">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-2">
                <div class="rectangle---1">
                </div>
                <div class="pt1-3">
                    <div class="group--3">
                        <div class="text----2">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---1">
                        <div class="pt-2">
                            PT
                        </div>
                        <svg id="0:1737" class="line-4"></svg>
                        <div class="text---2">
                            김혜준 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/6862543d9b7771eee819a56ccb2b5bd9.jpg" class="rectangle--4" />
                    <div class="group--4">
                        <svg id="0:1743" class="vector-8"></svg>
                        <div class="text-50">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-4">
                <div class="rectangle---2">
                </div>
                <div class="pt1-5">
                    <div class="group--5">
                        <div class="text----3">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---2">
                        <div class="text--1">
                            소아과
                        </div>
                        <svg id="0:1752" class="line-5"></svg>
                        <div class="text---3">
                            구만석 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/1c8c02b965e9913d0a51fd68106fb78c.jpg" class="rectangle--5" />
                    <div class="group--6">
                        <svg id="0:1758" class="vector-9"></svg>
                        <div class="text-51">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-6">
                <div class="rectangle---3">
                </div>
                <div class="rectangle---4">
                </div>
                <div class="pt1-7">
                    <div class="group--7">
                        <div class="text----4">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---3">
                        <div class="text--2">
                            정형외과
                        </div>
                        <svg id="0:1768" class="line-6"></svg>
                        <div class="text---4">
                            유승홍 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/dd8e514e3827f4c92de288233469584a.jpg" class="rectangle--6" />
                    <div class="group--8">
                        <svg id="0:1774" class="vector-10"></svg>
                        <div class="text-52">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-8">
                <div class="rectangle---5">
                </div>
                <div class="pt1-9">
                    <div class="group--9">
                        <div class="text----5">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---4">
                        <div class="pt-3">
                            PT
                        </div>
                        <svg id="0:1783" class="line-7"></svg>
                        <div class="text---5">
                            김혜준 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/c10c0d645d1d158a8937a29b32c57c52.jpg" class="rectangle--7" />
                    <div class="group--10">
                        <svg id="0:1789" class="vector-11"></svg>
                        <div class="text-53">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-10"  @click="goToExpertDetail">
                <div class="rectangle---6">
                </div>
                <div class="pt1-11">
                    <div class="group--11">
                        <div class="text----6">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---5">
                        <div class="pt-4">
                            PT
                        </div>
                        <svg id="0:1800" class="line-8"></svg>
                        <div class="text---6">
                            김혜준 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/cf3d1e111f5fd1d928748430a4ca88cb.jpg" class="rectangle--8" />
                    <div class="group--12">
                        <svg id="0:1806" class="vector-12"></svg>
                        <div class="text-54">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-12">
                <div class="rectangle---7">
                </div>
                <div class="pt1-13">
                    <div class="group--13">
                        <div class="text----7">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---6">
                        <div class="pt-5">
                            PT
                        </div>
                        <svg id="0:1815" class="line-9"></svg>
                        <div class="text---7">
                            김혜준 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/5b7e4a50c70ba9d363f1f7ae5c97d6a7.jpg" class="rectangle--9" />
                    <div class="group--14">
                        <svg id="0:1821" class="vector-13"></svg>
                        <div class="text-55">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-14">
                <div class="rectangle---8">
                </div>
                <div class="pt1-15">
                    <div class="group--15">
                        <div class="text----8">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---7">
                        <div class="text--3">
                            한의사
                        </div>
                        <svg id="0:1830" class="line-10"></svg>
                        <div class="text---8">
                            유승호 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/d56daf0628fcabb2304963bb911f09d1.jpg" class="rectangle--10" />
                    <div class="group--16">
                        <svg id="0:1836" class="vector-14"></svg>
                        <div class="text-56">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-16">
                <div class="rectangle---9">
                </div>
                <div class="pt1-17">
                    <div class="group--17">
                        <div class="text----9">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---8">
                        <div class="text--4">
                            정형외과
                        </div>
                        <svg id="0:1845" class="line-11"></svg>
                        <div class="text---9">
                            배항진 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/288eb15d4353edce578874dd7f55a525.jpg" class="rectangle--11" />
                    <div class="group--18">
                        <svg id="0:1851" class="vector-15"></svg>
                        <div class="text-57">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
            <div class="pt1-18">
                <div class="rectangle---10">
                </div>
                <div class="pt1-19">
                    <div class="group--19">
                        <div class="text----10">
                            대전 유성구 싸피동
                        </div>
                    </div>
                    <div class="group---9">
                        <div class="pt-6">
                            PT
                        </div>
                        <svg id="0:1860" class="line-12"></svg>
                        <div class="text---10">
                            김혜준 선생님
                        </div>
                    </div>
                    <img src="https://image-resource.creatie.ai/142625939968981/142625939968983/e532d1fffc6a3ddf437ce844c77c0082.jpg" class="rectangle--12" />
                    <div class="group--20">
                        <svg id="0:1866" class="vector-16"></svg>
                        <div class="text-58">
                            4.9
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="kakaomap">
            <div ref="mapContainer" style="width: 100%; height: 100%"></div>
        </div>
</template>

<style lang="scss">
.layout {
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* 화면의 최소 높이를 100vh로 설정 */
}

.main-content {
  flex-grow: 1; /* main-content 영역이 나머지 공간을 차지하도록 설정 */
  padding-top: 60px; /* 헤더 높이만큼 패딩을 추가 */
  padding-bottom: 60px; /* 풋터 높이만큼 패딩을 추가 */
  overflow: hidden; /* 오버플로우를 숨기기 */
}

.mainframe {
  display: flex;
  flex-wrap: wrap; /* 여러 콘텐츠가 있을 경우 자동으로 줄바꿈 */
  gap: 20px; /* 콘텐츠 간격 */
  width: 100%;
  height: 100%;
  justify-content: space-between; /* 콘텐츠들이 양쪽으로 정렬되도록 */
}

.weather, .booking, .hotboard, .extra {
  width: calc(50% - 10px); /* 두 개의 박스가 한 줄에 배치되도록 설정 */
  height: 100%; /* 각 콘텐츠 박스가 100% 높이를 차지하도록 설정 */
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}

/* .weather 스타일 */
.weather {
  background: url(https://image-resource.creatie.ai/142625939968981/142625939968983/9b58e45f93b221be42eb2e7df53337f9.jpg);
  background-size: cover;
  background-position: center;
  object-fit: cover;
}

.text- {
  position: absolute;
  top: 12px;
  left: 16px;
  width: 44px;
  height: 29px;
  color: #000000;
  font-family: "Bebas Neue";
  font-size: 24px;
  font-weight: 400;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

/* .booking 스타일 */
.booking {
  background-color: #ffffff;
  border: 1px solid #ffffff;
}

.text-- {
  position: absolute;
  top: 11px;
  left: 12px;
  width: 90px;
  height: 29px;
  color: #000000;
  font-family: "Bebas Neue";
  font-size: 24px;
  font-weight: 400;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

/* .hotboard 스타일 */
.hotboard {
  background-color: #ffffff;
  border: 1px solid #ffffff;
}

.hot {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.hot--1 {
  color: #9d9d9d;
  font-family: "Inter";
  font-size: 24px;
  line-height: 29px;
  font-weight: 400;
}

/* .extra 스타일 */
.extra {
  background-color: #ffffff;
  border: 1px solid #ffffff;
}

/* 반응형 디자인: 화면 크기에 맞게 조정 */
@media screen and (max-width: 768px) {
  .mainframe {
    flex-direction: column; /* 화면이 좁아지면 세로로 배치 */
  }
  .weather, .booking, .hotboard, .extra {
    width: 100%; /* 모바일 화면에서는 각 박스가 100% 너비를 차지하도록 설정 */
  }
}

</style>


<script>
import { ref, onMounted, onBeforeUnmount } from 'vue'

export default {
  name: 'MatchingDefault',
  emits: ['changeComponent'],  // changeComponent 이벤트 선언
  methods: {
    goToExpertRegist() {
      this.$emit('change-component', 'MatchingExpertRegist');
    },
    goToExpertDetail() {
      this.$emit('change-component', 'MatchingExpertDetail');
    }
  },

  setup() {
    const mapContainer = ref(null);
    const mapInstance = ref(null); // 카카오 맵 인스턴스를 저장할 ref

    const { VITE_KAKAO_MAP_KEY } = import.meta.env;

    // 카카오 맵 로딩
    const loadKakaoMap = (container) => {
      const script = document.createElement('script');
      script.src = `https://dapi.kakao.com/v2/maps/sdk.js?appkey=${VITE_KAKAO_MAP_KEY}&autoload=false`;
      document.head.appendChild(script);

      script.onload = () => {
        window.kakao.maps.load(() => {
          const options = {
            center: new window.kakao.maps.LatLng(36.355339, 127.297577), // 지도 중심 좌표
            level: 3, // 지도 확대 레벨
            maxLevel: 5, // 지도 축소 제한 레벨
          };

          // 지도 인스턴스를 생성
          mapInstance.value = new window.kakao.maps.Map(container, options);
        });
      };
    };

    // onMounted: 맵을 로드
    onMounted(() => {
      if (mapContainer.value) {
        loadKakaoMap(mapContainer.value);
      }
    });

    // onBeforeUnmount: 맵 인스턴스를 정리 (optional)
    onBeforeUnmount(() => {
      if (mapInstance.value) {
        window.kakao.maps.event.removeListener(mapInstance.value, 'click');
        // 다른 카카오 맵 이벤트나 리소스도 정리할 수 있음
      }
    });

    return {
      mapContainer,
    };
  },
};
</script>